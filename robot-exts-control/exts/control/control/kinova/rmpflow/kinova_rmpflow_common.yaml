# Copyright (c) 2019-2021, NVIDIA CORPORATION.  All rights reserved.
#
# NVIDIA CORPORATION and its licensors retain all intellectual property
# and proprietary rights in and to this software, related documentation
# and any modifications thereto.  Any use, reproduction, disclosure or
# distribution of this software and related documentation without an express
# license agreement from NVIDIA CORPORATION is strictly prohibited.

joint_limit_buffers: [.01, .01, .01, .01, .01, .01]

# Note: metric_weight and metric_scalar mean the same thing. Set to zero to turn it off.
rmp_params:
    cspace_target_rmp:
        metric_scalar: 50.
        position_gain: 100.
        damping_gain: 50.
        robust_position_term_thresh: .5
        inertia: 0.
    cspace_trajectory_rmp: # Note: unused
        p_gain: 100.
        d_gain: 10.
        ff_gain: .25
        weight: 50.
    cspace_affine_rmp: # Note: unused
        final_handover_time_std_dev: .25
        weight: 2000.
    joint_limit_rmp:
        metric_scalar: 1000.
        metric_length_scale: .01
        metric_exploder_eps: 1e-3
        metric_velocity_gate_length_scale: .01
        accel_damper_gain: 200.
        accel_potential_gain: 1.
        accel_potential_exploder_length_scale: .1
        accel_potential_exploder_eps: 1e-2
    joint_velocity_cap_rmp: # Note: Less important
        max_velocity: 4.  # max_xd
        velocity_damping_region: 1.5
        damping_gain: 1000.0
        metric_weight: 0.
    target_rmp:
        accel_p_gain: 100.
        accel_d_gain: 400.
        accel_norm_eps: .025

        # TODO: meters
        metric_alpha_length_scale: .001

        min_metric_alpha: .01
        max_metric_scalar: 10000
        min_metric_scalar: 2500
        proximity_metric_boost_scalar: 20.

        # TODO: meters
        proximity_metric_boost_length_scale: .0025

        xi_estimator_gate_std_dev: 20000. # unused
        accept_user_weights: false  # Values >= .5 are true and < .5 are false
    axis_target_rmp: # Note: Won't be used for end effector position control
        accel_p_gain: 210.
        accel_d_gain: 60.
        metric_scalar: 10
        proximity_metric_boost_scalar: 3000.
        # TODO: meters
        proximity_metric_boost_length_scale: .01
        xi_estimator_gate_std_dev: 20000.
        accept_user_weights: false
    collision_rmp: # Note import if no obstacles
        damping_gain: 50.
        # TODO: meters
        damping_std_dev: .005
        damping_robustness_eps: 1e-2
        # TODO: meters
        damping_velocity_gate_length_scale: .001
        repulsion_gain: 800.
        # TODO: meters
        repulsion_std_dev: .001
        # TODO: meters
        metric_modulation_radius: .05
        metric_scalar: 10000.  # Real value should be this.
        #metric_scalar: 0.  # Turns off collision avoidance.
        # TODO: meters
        metric_exploder_std_dev: .0025
        metric_exploder_eps: .001
    damping_rmp:
        accel_d_gain: 30.
        metric_scalar: 50.
        inertia: 0.

canonical_resolve:
    max_acceleration_norm: 5000.  # TODO: try setting much larger
    projection_tolerance: .01
    verbose: false

body_cylinders:
    - name: base_stem
      pt1: [0,0,.333]
      pt2: [0,0,0.]
      radius: .05

body_collision_controllers:
    - name: Base_Link
      radius: .05
    - name: Shoulder_Link
      radius: .05
    - name: Bicep_Link
      radius: .05
    - name: ForeArm_Link
      radius: .05
    - name: SphericalWrist1_Link
      radius: .05
    - name: SphericalWrist2_Link
      radius: .05

